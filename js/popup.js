var init = function(url) {
    // Basic check
    var gitUrls = new gitUrl(url);
    var urls = [gitUrls.homeUrl];
    if (gitUrls.pageUrl !== gitUrls.homeUrl) {
        urls.push(gitUrls.pageUrl);
    }
    new scanner(urls, [gitFiles[0]], false);

    // Extended check
    $('body').append('<p id="extended-check"><a href="#">Extended check &raquo;</a></p>');
    $('#extended-check > a').on('click', function() {
        $('#extended-check').remove();
        new scanner(urls, gitFiles, true);
    });
};

document.addEventListener('DOMContentLoaded', function() {
    chrome.tabs.getSelected(null, function(tab) {
        init(tab.url);
    });
}, false);